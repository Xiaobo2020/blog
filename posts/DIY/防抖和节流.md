## Preview

> 2020.03.19

ä¸ç®¡æ˜¯é˜²æŠ–(debounce)è¿˜æ˜¯èŠ‚æµ(throtting)ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸ºäº†è§£å†³ç”±äºæŸä¸ªäº‹ä»¶è§¦å‘é¢‘ç‡å¤ªå¿«å¯¼è‡´å“åº”é€Ÿåº¦è·Ÿä¸ä¸Šçš„é—®é¢˜ï¼Œåªæ˜¯è¡¨ç°ä¸Šå­˜åœ¨å„è‡ªçš„ç‰¹ç‚¹

## debounce

é˜²æŠ–åˆå¯ä»¥å«åšå»æŠ–åŠ¨ï¼Œä¸»è¦é€»è¾‘ä¸ºå¯¹äºäº‹ä»¶çš„è§¦å‘ä¸é©¬ä¸Šç«‹å³æ‰§è¡Œå“åº”å‡½æ•°ï¼Œè¿›è¡Œä¸€æ®µå»¶æ—¶å‘¨æœŸï¼Œå¦‚æœå»¶æ—¶æœŸé—´åˆğŸˆ¶ï¸æ–°çš„è§¦å‘ï¼Œé‚£ä¹ˆé’ˆå¯¹äºæ–°çš„è§¦å‘å‘èµ·æ–°çš„ä¸€æ®µå»¶æ—¶ï¼Œç›´åˆ°é¡ºåˆ©åº¦è¿‡å»¶æ—¶å‘¨æœŸæ‰§è¡Œå“åº”ã€‚

æœ€ä¸ºå¸¸è§çš„ä¾‹å­å°±æ˜¯é’ˆå¯¹äº `input` è¾“å…¥å†…å®¹åšæ ¡éªŒé€»è¾‘ï¼Œä½†æ˜¯è¾“å…¥çš„é€Ÿåº¦è¿‡å¿«å¯¼è‡´æ ¡éªŒé€»è¾‘é¢‘ç¹è§¦å‘ï¼Œè¿™ä¸ªæ—¶å€™åŠ å…¥é˜²æŠ–å¯ä»¥åœ¨è¾“å…¥åœæ­¢ä¸€æ®µæ—¶é—´åè§¦å‘ï¼Œé¿å…åå¤æ ¡éªŒã€‚

### Realization

```javascript
function debounce (handler, delay) {
  let timerId;
  return function (...args) {
    timerId = clearTimeout(timerId);
    timerId = setTimeout(() => {
      handler.apply(this, args);
    }, delay);
  }
}
```

### Example

```javascript
// åˆ›å»ºä¸€ä¸ªé˜²æŠ–çš„checkå‡½æ•°
const check = debounce(function (inputValue) {
  console.log('check', inputValue);
}, 1000);

check('first');
check('second');
setTimeout(() => {
  check('third after 1500ms');
}, 1500);
// check second
// check third after 1500ms
```

## throttling

èŠ‚æµå’Œé˜²æŠ–ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†é™åˆ¶çŸ­æ—¶é—´å†…çš„è§¦å‘é¢‘ç‡ï¼Œä¸è¿‡ä¸é˜²æŠ–ä¸åŒçš„æ˜¯è§¦å‘çš„æ—¶é—´ç‚¹ä¸ºä¸€æ®µæ—¶é—´å¼€å§‹çš„æ—¶å€™ï¼Œå†è§¦å‘å“åº”åçš„ä¸€æ®µæ—¶é—´å†…å¿½ç•¥åç»­è§¦å‘çš„å“åº”ã€‚

æœ€å½¢è±¡çš„ä¾‹å­å°±æ˜¯é¼ æ ‡çš„ `click` äº‹ä»¶ï¼Œæˆ‘åªéœ€è¦ç¬¬ä¸€æ¬¡ç‚¹å‡»è§¦å‘äº‹ä»¶ï¼Œç¬¬ä¸€æ¬¡ç‚¹å‡»åçš„é¢‘ç¹ç‚¹å‡»æˆ‘ä¸å¸Œæœ›è§¦å‘ï¼Œé¿å…åå¤è§¦å‘ã€‚

### Realization

```javascript
function throttling (handler, wait) {
  let timerId;
  return function (...args) {
    if (timerId) {
      return;
    }
    handler.apply(this, args);
    timerId = setTimeout(() => {
      timerId = undefined;
    }, wait);
  }
}
```

### Example

```javascript
// åˆ›å»ºä¸€ä¸ªèŠ‚æµçš„clickå‡½æ•°
const click = throttling(function (text) {
  console.log('click', text);
}, 1000);

click('first');
click('second');
setTimeout(() => {
  click('third after 1500ms');
}, 1500);
// click first
// click third after 1500ms
```

## Summary

ç›¸åŒç‚¹ï¼š

+ `debounce` å’Œ `throttling` éƒ½éœ€è¦ä¸€æ®µæ—¶é—´å‘¨æœŸè¾…åŠ©é™åˆ¶è§¦å‘é¢‘ç‡

ä¸åŒç‚¹ï¼š

+ `debounce` åœ¨å»¶æ—¶å‘¨æœŸç»“æŸåè§¦å‘å“åº”ï¼Œåç»­æ–°çš„äº‹ä»¶è§¦å‘ä¼šè¦†ç›–å·²æœ‰å‘¨æœŸï¼Œå¼€å¯ä¸€ä¸ªæ–°å»¶æ—¶å‘¨æœŸ
+ `throttling` å…ˆè¿›è¡Œå“åº”ï¼ŒåŒæ—¶å¼€å¯å†·å´å‘¨æœŸï¼Œå±è”½åç»­å†·å´å‘¨æœŸå†…çš„äº‹ä»¶è§¦å‘


## Link

+ [ä¸Šä¸€ç¯‡ï¼š**æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç»‘å®š â€”â€” bind (DIY)**](../DIY/bind.md)
+ [ä¸‹ä¸€ç¯‡ï¼š**Reduxæºç  â€”â€” compose**](../Redux/compose.md)